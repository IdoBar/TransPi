/*
========================================================================================
                                Config File TransPi
========================================================================================
                            Transcriptomes Analysis Pipeline
                            Author: Ramon E. Rivera-Vicens
                            Version: 1.0 (Palmuc)
----------------------------------------------------------------------------------------
*/

params {

    // ------------------- EDIT this variables only ------------------- //


    // Modify this accordingly (if needed)
    // kmers list (depends on read length!)
    k="25,37,45,53"

    // SOAP config file generator
    //#maximal read length
    max_rd_len="76"
    //[LIB]
    //#maximal read length in this lib
    rd_len_cutof="76"
    //#average insert size
    //avg_ins="200"
    //#if sequence needs to be reversed
    reverse_seq="0"
    //#in which part(s) the reads are used
    asm_flags="3"
    //#minimum aligned length to contigs for a reliable read location (at least 32 for short insert size)
    map_len="32"

    // ----------------------------- STOP ----------------------------- //

    // --------------------------- Do not modify variables below this line. --------------------------- //

    // ----------------------------- Proceed to modify process if needed ------------------------------ //

    // PATH to run analysis
    mypwd
    // Reads directory
    reads=/reads/*_R{1,2}.fastq.gz"
    // Uniport database PATH
    uniprot
    uniname
    //BUSCO database
    buscodb
    //RNAmmer
    rnam
    //Tmhmm
    tmhmm
    //SignalP
    signalp
    //PFAM file location
    //Check constantly for updates of pfam:ftp://ftp.ebi.ac.uk/pub/databases/Pfam/releases/"
    pfloc
    //name of pfam file
    pfname
    //Trinotate sqlite created when installing Trinotate
    Tsql
    // Directory for trace files
    tracedir="pipeline_info"
    // Pipeline options
    help = false
    fullHelp = false
    all = false
    onlyEvi = false
    //Test data
    readsTest = null
}

process {
    withLabel: big_cpus {
        cpus='30'
        memory='15 GB'
//        clusterOptions='-p lemmium --qos=normal'
//        executor='slurm'
    }
    withLabel: low_cpus {
        cpus='6'
        memory='10 GB'
//        clusterOptions='-p lemmium --qos=normal'
//        executor='slurm'
    }
    withLabel: big_mem {
        cpus='20'
        memory='350 GB'
//        clusterOptions='-p lemmium --qos=normal'
//        executor='slurm'
    }
    withLabel: med_mem {
        cpus='20'
        memory='180 GB'
//        clusterOptions='-p lemmium --qos=normal'
//        executor='slurm'
    }
    withLabel: med_mem2 {
        cpus='16'
        memory='93 GB'
//        clusterOptions='-p nitrogen --qos=normal'
//        executor='slurm'
    }
    withLabel: low_mem {
        cpus='20'
        memory='80 GB'
//        clusterOptions='-p lemmium --qos=normal'
//        executor='slurm'
    }
    errorStrategy='finish'
}

// env Evidential Gene variable (only for nextflow)
env.evi="$baseDir/evigene"

timeline {
  enabled = true
  file = "${params.tracedir}/transpi_timeline.html"
}
report {
  enabled = true
  file = "${params.tracedir}/transpi_report.html"
}
trace {
  enabled = true
  file = "${params.tracedir}/transpi_trace.txt"
}
dag {
  enabled = true
  file = "${params.tracedir}/transpi_dag.html"
}

profiles {
    conda {
        process.conda = "$baseDir/transpi_env.yml"
    }
    docker {
        docker.enabled = true
    }
    singularity {
        singularity.enabled = true
        singularity.autoMounts = true
    }
    test {
        includeConfig 'conf/test.config'
    }
}
